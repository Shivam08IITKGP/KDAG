"""Character summaries for improved extraction query generation."""

CHARACTER_SUMMARIES = {
    # ========================================================================
    # In Search of the Castaways
    # ========================================================================
    
    "in_search_of_the_castaways_thalcave": """Thalcave, whose name signifies "the thunderer" in Araucanian, is a Patagonian guide of lofty stature, exceeding six feet in height. He is a highly skilled baqueano of the Pampas, distinguished by his bronzed face painted with traditional markings and his attire of a guanaco-skin cloak and ox-hide leggings. An expert horseman and hunter, he is proficient with the bolas, lasso, and carbine. His constant companion is Thaouka, a magnificent Argentine horse with whom he shares an intuitive, communicative bond.

He encounters Lord Glenarvan's expedition on the eastern slope of the Andes after the rescue of Robert Grant. Joining the party as a guide, he provides vital information regarding a European prisoner—identified as Captain Harry Grant—held by the Poyuches Indians under cazique Calfoucoura. Despite early communication difficulties with the geographer Jacques Paganel, Thalcave becomes an essential ally, navigating the group through a severe lack of water to the Guamini River. He forms a protective and sympathetic relationship with Robert Grant, whom he frequently encourages during their travels.

During a major flood that sweeps the Pampas, Thalcave is separated from the main group. He and Thaouka are last seen by the travelers as a black speck disappearing into the distance across the inundated plains. His contribution to the journey is marked by his mastery of the environment, his loyalty to the mission, and his providential appearance when the travelers were in need of a guide across the South American continent.""",
    
    "in_search_of_the_castaways_kai_koumou": """Kai-Koumou is a high-ranking Maori chief of the fifth promotion, a status distinguished by the intricate and compact tattooing on his face and body. His name translates to "he who eats the limbs of his enemy," a title reflecting both his legendary bravery and his capacity for extreme cruelty. Physically, he is described as a tall man of approximately forty-five years with powerful limbs, an aquiline nose, and tawny eyes. He is typically seen wearing a flaxen mat adorned with dog-skins and necklaces of sacred stones called "pounamous," while carrying an English-made gun and a traditional double-edged hatchet known as a "patou-patou". Due to his fierce resistance against colonial forces, the governor of New Zealand has placed a price on his head.

Following a defeat by British troops, Kai-Koumou leads his vanquished followers back to the upper Waikato River to rouse the local tribes for further war. During this retreat, his tribe captures Lord Glenarvan's expedition after the travelers inadvertently encamp in Maori territory during a heavy fog. He transports the ten European prisoners upriver in a seventy-foot canoe made of pine, explicitly intending to use them as leverage. He informs the group that they will be exchanged for Maori chiefs held by the English or for ransom, threatening them with execution should the negotiations fail.

During the captivity, Kai-Koumou maintains a cold and stern demeanor, guarding his prisoners with extreme vigilance as they travel toward Lake Taupo. His prisoners ultimately manage to escape from a hut by widening a hole in the structure, a task led by Robert Grant. Kai-Koumou and his warriors immediately pursue the fugitives as they flee toward a sacred mountain, marking the final stage of his direct interaction with the party.""",
    
    "in_search_of_the_castaways_tom_ayrton": """Tom Ayrton, initially presenting himself as the former quartermaster of the *Britannia*, is an intelligent and stern individual who serves as a primary antagonist. He is first encountered in Australia under the employment of a colonist named Mr. O'Moore, where he claims to have been washed overboard just before the *Britannia* was wrecked on the Australian coast. He joins Lord Glenarvan's expedition as a guide, but he is eventually revealed to be Ben Joyce, a notorious leader of escaped convicts from a Perth penitentiary. His history with Captain Harry Grant is characterized by betrayal; he had been forcibly put ashore on the Australian coast by Grant for instigating a mutiny and attempting to turn the *Britannia* into a pirate vessel.

Ayrton's primary objective in the novel is to seize Lord Glenarvan's yacht, the *Duncan*, to use for his own piratical purposes. He leads the travelers into the treacherous marshes of the Snowy River, sabotaging their animals and wounding the sailor Mulready during a confrontation. He successfully obtains a letter intended for the *Duncan's* crew, which he intends to use to take command of the vessel. However, a transcription error by the geographer Jacques Paganel causes the yacht to sail to New Zealand rather than the Australian coast where Ayrton's gang waited. After the travelers are captured by Maori tribes in New Zealand and subsequently escape to the *Duncan*, they find Ayrton has already been taken prisoner by the crew.

In the final arc of the story, Ayrton negotiates a deal with Lord Glenarvan to avoid being turned over to British authorities. He provides a full confession of his past crimes and offers information that Captain Grant might be found in New Zealand, which ultimately facilitates the captain's rescue. As part of his agreement, Ayrton is not imprisoned but is instead exiled on the deserted Tabor Island (Maria Theresa Island). He is left there to live in solitude as penance for his crimes, occupying the same habitation where Captain Grant and his companions were eventually found.""",
    
    "in_search_of_the_castaways_ben_joyce": """Tom Ayrton, initially presenting himself as the former quartermaster of the *Britannia*, is an intelligent and stern individual who serves as a primary antagonist. He is first encountered in Australia under the employment of a colonist named Mr. O'Moore, where he claims to have been washed overboard just before the *Britannia* was wrecked on the Australian coast. He joins Lord Glenarvan's expedition as a guide, but he is eventually revealed to be Ben Joyce, a notorious leader of escaped convicts from a Perth penitentiary. His history with Captain Harry Grant is characterized by betrayal; he had been forcibly put ashore on the Australian coast by Grant for instigating a mutiny and attempting to turn the *Britannia* into a pirate vessel.

Ayrton's primary objective in the novel is to seize Lord Glenarvan's yacht, the *Duncan*, to use for his own piratical purposes. He leads the travelers into the treacherous marshes of the Snowy River, sabotaging their animals and wounding the sailor Mulready during a confrontation. He successfully obtains a letter intended for the *Duncan's* crew, which he intends to use to take command of the vessel. However, a transcription error by the geographer Jacques Paganel causes the yacht to sail to New Zealand rather than the Australian coast where Ayrton's gang waited. After the travelers are captured by Maori tribes in New Zealand and subsequently escape to the *Duncan*, they find Ayrton has already been taken prisoner by the crew.

In the final arc of the story, Ayrton negotiates a deal with Lord Glenarvan to avoid being turned over to British authorities. He provides a full confession of his past crimes and offers information that Captain Grant might be found in New Zealand, which ultimately facilitates the captain's rescue. As part of his agreement, Ayrton is not imprisoned but is instead exiled on the deserted Tabor Island (Maria Theresa Island). He is left there to live in solitude as penance for his crimes, occupying the same habitation where Captain Grant and his companions were eventually found.""",
    
    "in_search_of_the_castaways_jacques_paganel": """Jacques Eliacim François Marie Paganel is a distinguished French geographer and the secretary of the Geographical Society of Paris. Characterized by profound scientific knowledge and extreme absent-mindedness, he joins Lord Glenarvan's expedition accidentally after boarding the yacht *Duncan* in the dark, believing it to be the *Scotia* bound for India. Upon discovering his mistake, he stays with the party to assist in the search for Captain Harry Grant, providing the geographical interpretations of the distress documents that guide the travelers across the thirty-seventh parallel in South America, Australia, and New Zealand.

Paganel's journey is defined by significant errors that drive the plot: he mistakenly learns Portuguese instead of Spanish by studying *The Lusiad*, and later, in a state of mental distraction, he substitute "New Zealand" for "Australia" in a critical dispatch. This mistake leads to the expedition's capture by Maoris in New Zealand, where Paganel is tattooed from head to foot with an heraldic kiwi on his chest. However, the same error providentially brings the *Duncan* to Maria Theresa Island, enabling the successful rescue of Captain Grant. He maintains close relationships with the entire search party, particularly acting as a mentor and geography teacher to Robert Grant.

Before the voyage, Paganel spent twenty years studying geography in Paris, possessing a memory that allowed him to recall maps and statistics without consultation. His defining traits include irrepressible optimism and a commitment to scientific discovery. Following the mission's conclusion and the return to Scotland, he marries and decides to settle at Malcolm Castle permanently, fearing that his extensive Maori tattoos would subject him to public ridicule in France.""",
    
    # ========================================================================
    # The Count of Monte Cristo
    # ========================================================================
    
    "the_count_of_monte_cristo_faria": """Abbé Faria is an elderly Italian priest and scholar imprisoned in the Château d'If since 1811 for his political aspirations regarding a unified Italy. Within the prison, he is widely dismissed as the "mad priest" by jailers and officials due to his persistent offers of millions of francs in exchange for his liberty. Despite his confinement, he demonstrates immense ingenuity and intellectual vigor, having manufactured his own writing materials and tools to pen a treatise on the Italian monarchy and dig an escape tunnel over several years.

Faria's attempt to tunnel to freedom accidentally leads him into the cell of Edmond Dantès, an event that saves the young sailor from suicide. Faria adopts Dantès as his spiritual son and protégé, dedicating their time together to educating him in languages, sciences, and history. Crucially, Faria applies his deductive reasoning to reconstruct the events leading to Dantès' imprisonment, identifying Danglars, Fernand, and Villefort as the architects of his ruin. This mentorship transforms Dantès from a naive sailor into a man of formidable intellect and resolve.

Suffering from a hereditary cataleptic condition, Faria survives one seizure in prison with Dantès' aid but is left partially paralyzed. Sensing his end is near, he bequeaths to Dantès the secret of the immense Spada treasure, hidden on the Island of Monte Cristo, which he had inherited while serving as secretary to the last Count Spada. Faria dies during a subsequent seizure; his death facilitates Dantès' escape, as Edmond takes the Abbé's place in the burial sack, securing both his freedom and the fortune that fuels his vengeance.""",
    
    "the_count_of_monte_cristo_noirtier": """Noirtier de Villefort is the father of the Procureur du Roi, Gérard de Villefort, and a former French revolutionary of significant influence. Previously a Girondin and a Senator under Napoleon, he was a zealous Bonapartist and president of a Bonapartist club in Paris. In the novel's present timeline, he is an old man suffering from complete paralysis; he is mute and immobile, described as a "dumb and frozen carcass" who communicates solely through the expression of his eyes, which retain his formidable intelligence and commanding will.

Historically, Noirtier was the intended recipient of the conspiratorial letter from the Island of Elba carried by Edmond Dantès, a fact his son concealed to protect his own career, leading to Dantès' imprisonment. He was also responsible for the death of General Quesnel (Baron d'Épinay) in a duel in 1815, a secret that drives his fierce opposition to the marriage of his granddaughter, Valentine, to Quesnel's son, Franz d'Épinay. Despite his physical helplessness, Noirtier successfully prevents this union by dictating a will that disinherits Valentine if she marries Franz. Later, Noirtier becomes the target of a poisoning attempt by Madame de Villefort; he survives lethal lemonade because his medical treatment for paralysis involves the ingestion of brucine, making him immune to the poison, though the draught kills his faithful servant, Barrois.

Noirtier shares a deep, protective bond with his granddaughter, Valentine de Villefort, who is his sole comfort and the only person capable of interpreting his silent communication. His relationship with his son, Villefort, is strained by their opposing political histories—Villefort being a Royalist and Noirtier a Bonapartist—and is maintained largely for the sake of reputation and safety. He holds his grandson, Edward, in disfavor. He was faithfully served by Barrois for twenty-five years until the servant's death.""",
}


def get_character_summary(book_name: str, character_name: str) -> str:
    """Get character summary for query generation.
    
    Args:
        book_name: Name of the book.
        character_name: Name of the character.
        
    Returns:
        Character summary or empty string if not found.
    """
    # Normalize to snake_case key
    book_key = book_name.lower().replace(" ", "_")
    char_key = character_name.lower().replace(" ", "_").replace("-", "_")
    key = f"{book_key}_{char_key}"
    
    summary = CHARACTER_SUMMARIES.get(key, "")
    
    if not summary:
        # Log available keys for debugging
        import logging
        logger = logging.getLogger(__name__)
        logger.warning(f"No character summary found for key: {key}")
        logger.debug(f"Available keys: {list(CHARACTER_SUMMARIES.keys())}")
    
    return summary
